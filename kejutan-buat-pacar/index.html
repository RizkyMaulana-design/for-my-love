<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinity Memories - Ultimate Version ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400;600;800&family=Sacramento&display=swap');

        :root {
            --primary-color: #ff4d6d;
            --bg-gradient: linear-gradient(45deg, #000, #1a1a2e, #533483, #000);
            --glass: rgba(255, 255, 255, 0.05);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
        body { background: #000; color: white; font-family: 'Montserrat', sans-serif; overflow-x: hidden; }

        /* --- BACKGROUND --- */
        .bg-mega-4d { position: fixed; inset: 0; z-index: -2; background: var(--bg-gradient); background-size: 400% 400%; animation: megaGradient 15s ease infinite; transition: 1s; }
        @keyframes megaGradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .stars { position: fixed; inset: 0; z-index: -1; pointer-events: none; }

        /* --- UI ELEMENTS --- */
        #splash { position: fixed; inset: 0; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; text-align: center; }
        #splash-text { font-family: 'Sacramento', cursive; font-size: 3.5rem; color: var(--primary-color); margin-bottom: 30px; white-space: nowrap; overflow: hidden; border-right: 3px solid var(--primary-color); animation: typing 4s steps(40, end), blink-caret .75s step-end infinite; }

        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: var(--primary-color); } }
        
        .container { max-width: 1100px; margin: 0 auto; padding: 60px 20px; display: none; opacity: 0; transition: 1.5s; }
        h1 { font-family: 'Sacramento', cursive; font-size: 5rem; color: var(--primary-color); text-align: center; margin-bottom: 20px; }

        /* --- COUNTER --- */
        .date-counter { display: flex; justify-content: center; gap: 20px; background: var(--glass); padding: 30px; border-radius: 25px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); margin: 30px auto; max-width: fit-content; }
        .date-counter b { font-size: 2.2rem; color: var(--primary-color); display: block; }

        .btn-luxury { background: var(--glass); border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 12px 25px; border-radius: 50px; cursor: pointer; transition: 0.4s; font-weight: 600; font-size: 0.8rem; }
        .btn-luxury:hover, .btn-luxury.active { background: var(--primary-color); box-shadow: 0 0 20px var(--primary-color); }
        .btn-glow { animation: glow 2s ease-in-out infinite alternate; }
        @keyframes glow { from { box-shadow: 0 0 10px var(--primary-color), 0 0 20px var(--primary-color), 0 0 30px var(--primary-color); } to { box-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color), 0 0 40px var(--primary-color); } }

        /* --- GALLERY --- */
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 50px; }
        .gallery-item { border-radius: 20px; overflow: hidden; height: 350px; position: relative; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); transition: 0.5s; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.6); transition: 0.5s; }
        .gallery-item:hover img { filter: brightness(1); transform: scale(1.05); }
        .gallery-item .caption-overlay { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(transparent, rgba(0,0,0,0.8)); padding: 20px; font-size: 0.8rem; opacity: 0.8; }

        /* --- TIMELINE --- */
        .timeline { margin-top: 100px; padding: 40px 0; }
        .timeline-item { position: relative; padding: 20px 40px; border-left: 2px solid var(--primary-color); margin-left: 20px; margin-bottom: 30px; background: var(--glass); border-radius: 0 20px 20px 0; }
        .timeline-item::before { content: '‚ù§Ô∏è'; position: absolute; left: -14px; top: 20px; background: #000; }

        /* --- SIDEBAR --- */
        #sidebar { position: fixed; top: 0; right: -350px; width: 300px; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(20px); z-index: 6000; transition: 0.6s; padding: 60px 30px; border-left: 2px solid var(--primary-color); }
        #sidebar.active { right: 0; }
        .menu-icon { position: fixed; top: 30px; right: 30px; font-size: 30px; color: var(--primary-color); cursor: pointer; z-index: 5000; }

        /* --- FLOATING QUOTE --- */
        #quote-btn { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: var(--primary-color); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 4000; box-shadow: 0 10px 20px rgba(0,0,0,0.3); font-size: 25px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* --- MODAL --- */
        #modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; justify-content: center; align-items: center; z-index: 10000; padding: 20px; }
        .modal-box { background: white; color: #333; padding: 40px; border-radius: 30px; max-width: 500px; text-align: center; position: relative; }

        @media (max-width: 768px) { h1 { font-size: 3rem; } .date-counter { flex-wrap: wrap; } }
    </style>
</head>
<body>

    <audio id="mySong" loop><source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg"></audio>

    <div class="bg-mega-4d"></div>
    <div class="stars" id="stars"></div>

    <div id="quote-btn" onclick="showQuote()">‚úâÔ∏è</div>

    <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
    <nav id="sidebar">
        <div onclick="toggleMenu()" style="cursor:pointer; font-size: 35px; color:var(--primary-color); text-align:right;">&times;</div>
        <div style="margin-top: 40px;">
            <h3 style="font-family:'Sacramento'; font-size: 2rem; color: var(--primary-color);">Our Secret Menu</h3>
            <ul style="list-style:none; margin-top: 20px;">
                <li style="padding: 15px 0; cursor:pointer;" onclick="changeTheme()">üé® Change Universe</li>
                <li style="padding: 15px 0; cursor:pointer;" onclick="toggleMusic()">üéµ Play/Pause Music</li>
                <li style="padding: 15px 0; cursor:pointer;" onclick="openLetter()">üíå Special Letter</li>
            </ul>
        </div>
    </nav>

    <div id="splash">
        <h2 id="splash-text">Hi Sayang... Siap lihat perjalanan kita?</h2>
        <button class="btn-luxury btn-glow" onclick="initGallery()" style="padding: 15px 40px;">Buka Duniaku ‚ú®</button>
    </div>

    <div class="container" id="main-ui">
        <h1>Infinity Love ‚ù§Ô∏è</h1>
        
        <div class="date-counter">
            <div><b id="days">0</b>Hari</div>
            <div><b id="hours">0</b>Jam</div>
            <div><b id="mins">0</b>Menit</div>
            <div><b id="secs">0</b>Detik</div>
        </div>

        <div style="display:flex; justify-content:center; gap:10px; margin-bottom: 30px;">
            <button class="btn-luxury active" onclick="filterPhotos('all', this)">Semua Kenangan</button>
            <button class="btn-luxury" onclick="filterPhotos('fav', this)">Favorit ‚ú®</button>
        </div>

        <div class="gallery">
            <div class="gallery-item" data-category="fav" onclick="showCaption('Pesan untuk foto 1: Kenangan paling manis! ‚ù§Ô∏è')">
                <img src="1.jpeg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="all" onclick="showCaption('Pesan untuk foto 2: Kamu cantik banget di sini. üòç')">
                <img src="2.jpg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="fav" onclick="showCaption('Pesan untuk foto 3: Pas kita jalan-jalan bareng. üöó')">
                <img src="3.jpg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="all" onclick="showCaption('Pesan untuk foto 4: Momen lucu yang nggak terlupakan! üòÇ')">
                <img src="4.jpg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="fav" onclick="showCaption('Pesan untuk foto 5: I Love You! ‚ù§Ô∏è')">
                <img src="5.jpg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="all" onclick="showCaption('Pesan untuk foto 6: Semangat terus ya sayang! üí™')">
                <img src="6.jpg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="all" onclick="showCaption('Pesan untuk foto 7: My happy place. üè†')">
                <img src="7.jpg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="fav" onclick="showCaption('Pesan untuk foto 8: Kencan terbaik kita! ‚ú®')">
                <img src="8.jpeg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="all" onclick="showCaption('Pesan untuk foto 9: Selamanya bareng ya. üíç')">
                <img src="9.jpg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
            <div class="gallery-item" data-category="fav" onclick="showCaption('Pesan untuk foto 10: Akhir dari galeri, tapi awal dari selamanya. ‚ù§Ô∏è')">
                <img src="10.jpg">
                <div class="caption-overlay">Klik untuk cerita..</div>
            </div>
        </div>

        <div class="timeline">
            <h2 style="font-family:'Sacramento'; font-size: 3rem; text-align:center; color: var(--primary-color);">Our Timeline</h2>
            <div class="timeline-item">
                <h4 style="color:var(--primary-color)">1 Januari 2024</h4>
                <p>Hari pertama kita memulai segalanya. üíñ</p>
            </div>
            <div class="timeline-item">
                <h4 style="color:var(--primary-color)">14 Februari 2024</h4>
                <p>Valentine pertama kita yang sangat berkesan.</p>
            </div>
            <div class="timeline-item">
                <h4 style="color:var(--primary-color)">Mei 2024</h4>
                <p>Liburan singkat yang bikin kita makin dekat.</p>
            </div>
            <div class="timeline-item">
                <h4 style="color:var(--primary-color)">Sekarang</h4>
                <p>Masih berjuang bareng dan makin sayang. ‚ù§Ô∏è</p>
            </div>
        </div>
    </div>

    <div id="modal">
        <div class="modal-box" id="modal-box">
            <span onclick="closeModal()" style="position:absolute; top:15px; right:20px; cursor:pointer; font-size:25px;">&times;</span>
            <p id="modal-text" style="font-size: 1.2rem; line-height: 1.6;"></p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        const anniversaryDate = "2024-01-01";
        
        function showCaption(text) {
            const modal = document.getElementById('modal');
            const modalText = document.getElementById('modal-text');
            modal.style.display = 'flex';
            modalText.innerText = text;
        }

        function closeModal() { document.getElementById('modal').style.display = 'none'; }

        const quotes = [
            "Kamu adalah alasan aku tersenyum hari ini. üòä",
            "Terima kasih sudah jadi rumah buat aku. üè†‚ú®",
            "Setiap detik sama kamu itu anugerah. ‚è≥üíñ",
            "Mencintaimu adalah keputusan terbaikku. üåπ"
        ];
        function showQuote() {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            showCaption(randomQuote);
        }

        let currentTheme = 0;
        const themes = [
            { name: "Nebula Rose", primary: "#ff4d6d", gradient: "linear-gradient(45deg, #000, #1a1a2e, #533483, #000)", music: "https://www.bensound.com/bensound-music/bensound-love.mp3" },
            { name: "Midnight Ocean", primary: "#00d2ff", gradient: "linear-gradient(45deg, #000, #000428, #004e92, #000)", music: "https://www.bensound.com/bensound-music/bensound-relaxing.mp3" }
        ];

        function changeTheme() {
            currentTheme = (currentTheme + 1) % themes.length;
            const t = themes[currentTheme];
            document.documentElement.style.setProperty('--primary-color', t.primary);
            document.documentElement.style.setProperty('--bg-gradient', t.gradient);
            const song = document.getElementById('mySong');
            song.src = t.music;
            song.play();
            toggleMenu();
        }

        // REMOVED THE OLD TYPE FUNCTION

        function initGallery() {
            document.getElementById('mySong').play().catch(() => {});
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            document.getElementById('splash').style.display = 'none';
            const ui = document.getElementById('main-ui');
            ui.style.display = 'block';
            setTimeout(() => { ui.style.opacity = '1'; startCounter(); }, 100);
        }

        function startCounter() {
            setInterval(() => {
                const diff = new Date() - new Date(anniversaryDate);
                document.getElementById('days').innerText = Math.floor(diff / 86400000);
                document.getElementById('hours').innerText = Math.floor((diff / 3600000) % 24);
                document.getElementById('mins').innerText = Math.floor((diff / 60000) % 60);
                document.getElementById('secs').innerText = Math.floor((diff / 1000) % 60);
            }, 1000);
        }

        function toggleMenu() { document.getElementById('sidebar').classList.toggle('active'); }
        function toggleMusic() { const m = document.getElementById('mySong'); m.paused ? m.play() : m.pause(); }

        function filterPhotos(cat, btn) {
            document.querySelectorAll('.btn-luxury').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.gallery-item').forEach(item => {
                item.style.display = (cat === 'all' || item.getAttribute('data-category') === cat) ? 'block' : 'none';
            });
        }
        
        // Stars generator
        for(let s=0; s<40; s++) {
            const star = document.createElement('div');
            star.style = `position:absolute; width:2px; height:2px; background:white; top:${Math.random()*100}vh; left:${Math.random()*100}vw; border-radius:50%; opacity:${Math.random()};`;
            document.getElementById('stars').appendChild(star);
        }
    </script>
</body>
</html>